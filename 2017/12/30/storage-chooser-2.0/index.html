<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ashish Shekar"><title> · Codekidlabs</title><meta name="description" content="Storage-chooser 2.0With so many days of coding and perfecting each features today I’m going to showcase some of the new features of the storage-choose"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Codekidlabs</a></h3><div class="description"><p>codekid Project Home</p></div></div></div><ul class="social-links"><li><a href="http://github.com/codekidX"><i class="fa fa-github"></i></a></li><li><a href="http://plus.google.come/+AshishShekar"></a><i class="fa fa-google-plus-official"></i></li></ul><div class="footer"><a target="_blank" href="/"><span>Written by</span></a><a href="https://github.com/codekidX"> codekidX</a><span></span></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a></a></h3></div><div class="post-content"><h2 id="Storage-chooser-2-0"><a href="#Storage-chooser-2-0" class="headerlink" title="Storage-chooser 2.0"></a>Storage-chooser 2.0</h2><p>With so many days of coding and perfecting each features today I’m going to showcase some of the new features of the storage-chooser library.</p>
<h2 id="New-Features"><a href="#New-Features" class="headerlink" title="New Features!"></a>New Features!</h2><ul>
<li>Resume a session</li>
<li>Theme storage-chooser more efficiently and dynamically</li>
<li>Filter files by Parent Type</li>
<li>Ability to choose multiple files</li>
</ul>
<h3 id="Resume-a-session"><a href="#Resume-a-session" class="headerlink" title="=> Resume a session"></a>=> Resume a session</h3><p>Most of the time users <em>(if like me)</em> might forget or may choose a wrong file while using this library. And when that file is inside bazillion folders users will have to navigate again to that same folder <em>(a.k.a pissed action)</em>. In storage-chooser 2.0 you can set<br><code>builder.shouldResumeSession(true);</code><br>which will tell the library to start chooser with last interacted file path. Also the library remembers when the user cancels the chooser and then start from that path next time when this config is set.</p>
<h3 id="Theme-storage-chooser-more-efficiently-and-dynamically"><a href="#Theme-storage-chooser-more-efficiently-and-dynamically" class="headerlink" title="=> Theme storage-chooser more efficiently and dynamically"></a>=> Theme storage-chooser more efficiently and dynamically</h3><p>After 3 days of flowcharts and what not I found <em>(I think I found)</em> a better way to theme the storage-chooser more efficiently.</p>
<p>The way theming works now is by scheme. You set a color scheme to chooser which is an array <em>(int[])</em> in your xml. For example:</p>
<pre><code>&lt;array name=&quot;paranoid_theme&quot;&gt;
    &lt;!-- Overview --&gt;
    &lt;item&gt;#151515&lt;/item&gt; &lt;!--  Top Header bg --&gt;
    &lt;item&gt;#2c9633&lt;/item&gt; &lt;!-- header text   --&gt;
    &lt;item&gt;#252525&lt;/item&gt; &lt;!-- list bg  --&gt;
    &lt;item&gt;@android:color/white&lt;/item&gt; &lt;!--  storage list name text  --&gt;
    &lt;item&gt;#e1e1e1&lt;/item&gt; &lt;!-- free space text  --&gt;
    &lt;item&gt;#2c9633&lt;/item&gt; &lt;!-- memory bar --&gt;

    &lt;!-- secondary dialog colors --&gt;
    &lt;item&gt;#151515&lt;/item&gt; &lt;!-- folder tint --&gt;
    &lt;item&gt;#252525&lt;/item&gt; &lt;!-- list bg --&gt;
    &lt;item&gt;@android:color/white&lt;/item&gt; &lt;!-- list text --&gt;
    &lt;item&gt;#151515&lt;/item&gt; &lt;!-- address bar tint --&gt;
    &lt;item&gt;@color/chevronBgColor&lt;/item&gt; &lt;!-- new folder hint tint --&gt;
    &lt;item&gt;#2c9633&lt;/item&gt; &lt;!-- select button color --&gt;
    &lt;item&gt;#da6c6c&lt;/item&gt; &lt;!-- new folder layour bg --&gt;
    &lt;item&gt;#2c9633&lt;/item&gt; &lt;!-- fab multiselect color --&gt;
    &lt;item&gt;#151515&lt;/item&gt; &lt;!-- address bar bg --&gt;
&lt;/array&gt;
</code></pre><p>Here I have created a color scheme called <code>paranoid_theme</code> which can be then set to chooser by writing</p>
<pre><code>StorageChooser.Theme theme = new StorageChooser.Theme(getApplicationContext());
theme.setScheme(getResources().getIntArray(R.array.paranoid_theme));
// and then passing it to builder instance
builder.setTheme(theme);
</code></pre><p>This way you can have multiple schemes of storage-chooser theme depending upon your use case. This is how paranoid_theme looks:</p>
<p><img src="https://i.imgur.com/xLs9aN5.png" alt=""></p>
<h3 id="Filter-files-by-Parent-Type"><a href="#Filter-files-by-Parent-Type" class="headerlink" title="=> Filter files by Parent Type"></a>=> Filter files by Parent Type</h3><p>File filters are good and when your app is made for a specific purpose like choosing songs to be added in a playlist you might not want the user to go into the folders where there are no songs. Now you can add filter to builder instance like this<br><code>builder.filter(StorageChooser.FileType.AUDIO);</code><br>this will filter out all folders containing audio files for you and thereby reducing some effort from user side.</p>
<p>Here are some filters available in storage-chooser. Want any other filter types to be included ? <a href="https://github.com/codekidX/storage-chooser/issues" target="_blank" rel="noopener">Open an issue</a></p>
<table>
<thead>
<tr>
<th>filter</th>
<th>extensions</th>
</tr>
</thead>
<tbody>
<tr>
<td>StorageChooser.FileType.AUDIO</td>
<td>.mp3 .ogg</td>
</tr>
<tr>
<td>StorageChooser.FileType.VIDEO</td>
<td>.mp4 .ts .mkv .avi .flv</td>
</tr>
<tr>
<td>StorageChooser.FileType.IMAGES</td>
<td>.jpg .jpeg .png .gif .tiff</td>
</tr>
<tr>
<td>StorageChooser.FileType.DOCS</td>
<td>.pdf .doc .docx .ppt .xls</td>
</tr>
</tbody>
</table>
<h3 id="Ability-to-choose-multiple-files"><a href="#Ability-to-choose-multiple-files" class="headerlink" title="=> Ability to choose multiple files"></a>=> Ability to choose multiple files</h3><p>Atlast I was able to find some time handcrafting this feature <em>(and write this doc)</em> . This was planned from the start and is available in storage-chooser 2.0. It’s already in there you don’t need to write any special code for it. Just make sure your type of chooser is of type FILE_PICKER.<br><code>builder.setType(StorageChooser.FILE_PICKER);</code></p>
<p><img src="https://media.giphy.com/media/7AWKkgm9Nozw4/giphy.gif" alt=""></p>
<h3 id="List-of-configuration-for-StorageChooser-Builder-until-now"><a href="#List-of-configuration-for-StorageChooser-Builder-until-now" class="headerlink" title="List of configuration for StorageChooser.Builder (until now)"></a>List of configuration for StorageChooser.Builder <em>(until now)</em></h3><p>You can have the following configuration of builder.</p>
<table>
<thead>
<tr>
<th>methods</th>
<th>parameters</th>
<th>compulsary?</th>
</tr>
</thead>
<tbody>
<tr>
<td>withActivity</td>
<td>Activity</td>
<td>Yes</td>
</tr>
<tr>
<td>withFragmentManager</td>
<td>FragmentManager <em>(legacy)</em></td>
<td>Yes</td>
</tr>
<tr>
<td>withMemoryBar</td>
<td>boolean</td>
<td>No</td>
</tr>
<tr>
<td>withPreference</td>
<td>SharedPreferences</td>
<td>actionSave(true)</td>
</tr>
<tr>
<td>withPredefinedPath</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td><strong>setType</strong></td>
<td>StoragChooser.DIRECTORY_CHOOSER <strong><em>or</em></strong> StorageChooser.FILE_PICKER</td>
<td>allowCustomPath(true)</td>
</tr>
<tr>
<td>showHidden</td>
<td>boolean</td>
<td>No</td>
</tr>
<tr>
<td>setTheme</td>
<td>StorageChooser.Theme</td>
<td>No</td>
</tr>
<tr>
<td>skipOverview</td>
<td>boolean, String</td>
<td>No</td>
</tr>
<tr>
<td>skipOverview</td>
<td>boolean</td>
<td>No</td>
</tr>
<tr>
<td>withContent</td>
<td>com.codekidlabs.storagechooser.Content</td>
<td>No</td>
</tr>
<tr>
<td>filter</td>
<td>StorageChooser.FileType</td>
<td>No</td>
</tr>
<tr>
<td>shouldResumeSession</td>
<td>boolean</td>
<td>No</td>
</tr>
<tr>
<td>setHeadingTypeface</td>
<td>String, boolean</td>
<td>No</td>
</tr>
<tr>
<td>setListTypeface</td>
<td>String, boolean</td>
<td>No</td>
</tr>
<tr>
<td>disableMultiSelect</td>
<td>NONE</td>
<td>No</td>
</tr>
</tbody>
</table>
<h3 id="Development"><a href="#Development" class="headerlink" title="Development"></a>Development</h3><p>Slooooooooooow. But I’m still going strong !</p>
<h3 id="Todos"><a href="#Todos" class="headerlink" title="Todos"></a>Todos</h3><ul>
<li>Write Tests</li>
<li>Add thumbnail feature <em>(for images and videos)</em></li>
<li>Squash bugs which will come in my way by saying <code>YOU SHALL NOT PASS !</code></li>
</ul>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>Custom Mozilla v3</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-12-30</span><i class="fa fa-comment-o"></i><a href="/2017/12/30/storage-chooser-2.0/#comments">Comments</a><i class="fa fa-tag"></i></div></div></div></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'codekidlabs-github-io';
var disqus_identifier = '2017/12/30/storage-chooser-2.0/';
var disqus_title = '';
var disqus_url = 'http://codekidlabs.github.io/2017/12/30/storage-chooser-2.0/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>